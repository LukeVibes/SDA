package edu.carleton.comp4601.resources;

import com.mongodb.DB;
import com.mongodb.DBCursor;
import com.mongodb.DBObject;
import com.mongodb.MongoClient;
import com.mongodb.client.MongoCollection;
import com.mongodb.client.MongoDatabase;
import org.bson.Document;

public class MyMongoDB {
	
	//Singleton code
	private static MyMongoDB instance;
	public static void setInstance(MyMongoDB instance){
		MyMongoDB.instance = instance;
	}
	public static MyMongoDB getInstance(){
		if (instance == null)
			instance = new MyMongoDB();
		return instance;
	}
	
	//Mongo Variables
	
	
	//Constructor
	public MyMongoDB(){
		//Mongo Set-up
		
		
		/* Syntax (post depricated DB)
		Document doc = new Document("name", "Andrew Erlichson")// 
                .append("company", "10gen"); 
 
        coll.insertOne(doc); // first insert 
        doc.remove("_id"); // remove the _id key 
         
        more at: https://www.programcreek.com/java-api-examples/index.php?class=com.mongodb.MongoClient&method=getDatabase
        */
	}
	
	public MongoCollection<Document> getCollection(){
		return coll;
	}
	
	public void createList(){
		Integer k = 0;
		DBCursor cursor = coll.find();
		
			while (cursor.hasNext()) {
				DBObject o = cursor.next();
				String description = (String) o.get("description");
				String id          = (String) o.get("id");
				String balance     = (String) o.get("balance");
				
				int id_I       = Integer.parseInt(id);
				int balance_I  = Integer.parseInt(balance);
				
				Account NewAccount = new Account(id_I, balance_I, description);
				
			    accounts.put(k, NewAccount);
			    k++;
		   }
	}

}
